# Pekkoä»»åŠ¡è°ƒåº¦å¹³å° - ç³»åˆ—æ–‡ç« 

> ä»DolphinScheduleråˆ°Pekkoï¼šæ„å»ºä¸‹ä¸€ä»£ä»»åŠ¡è°ƒåº¦å¹³å°

**ğŸ‰ ç³»åˆ—å®Œç»“ï¼š7ç¯‡å®Œæ•´æŠ€æœ¯æ–‡ç« ï¼Œå…¨éƒ¨å®Œæˆï¼**

ä»æˆ˜ç•¥æ„¿æ™¯åˆ°ç”Ÿäº§å®è·µï¼Œä»å•æœºåˆ°åˆ†å¸ƒå¼ï¼Œä»æ— çŠ¶æ€åˆ°æŒä¹…åŒ–ï¼Œæ„å»ºäº†ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚

---

## ğŸ“š ç³»åˆ—æ–‡ç« åˆ—è¡¨ï¼ˆå…¨éƒ¨å®Œæˆï¼‰

### âœ… å·²å®Œæˆï¼ˆ7/7ï¼‰

#### 1. æˆ˜ç•¥ç¯‡ï¼šæ„¿æ™¯ä¸åˆ›æ–°
- **æ–‡æ¡£**: [01_strategy_pekko_vs_dolphinscheduler.md](./01_strategy_pekko_vs_dolphinscheduler.md)
- **æ¶æ„å›¾**: [01_architecture_diagrams.md](./01_architecture_diagrams.md)
- **ä¸»é¢˜**:
  - DolphinSchedulerçš„æˆåŠŸä¸å±€é™
  - è¡Œä¸šç—›ç‚¹ä¸æ–°éœ€æ±‚åˆ†æ
  - ä¸ºä»€ä¹ˆé€‰æ‹©Pekko
  - ä¸‹ä¸€ä»£ä»»åŠ¡è°ƒåº¦å¹³å°çš„æ„¿æ™¯
  - æ ¸å¿ƒæ¶æ„è®¾è®¡
  - æŠ€æœ¯è·¯çº¿å›¾
  - æ€§èƒ½å¯¹æ¯”
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

### âœ… å·²å‘å¸ƒ

#### 2. æ¶æ„ç¯‡ï¼šActoræ¨¡å‹æ·±åº¦è§£æ
- **æ–‡æ¡£**: [02_actor_model_architecture.md](./02_actor_model_architecture.md)
- **è®¾è®¡æ¨¡å¼**: [02_actor_patterns.md](./02_actor_patterns.md)
- **ä¸»é¢˜**:
  - Actoræ¨¡å‹åŸºç¡€ä¸æ ¸å¿ƒç‰¹æ€§
  - WorkflowActorè®¾è®¡è¯¦è§£
  - ç›‘ç£ç­–ç•¥ä¸é”™è¯¯æ¢å¤æœºåˆ¶
  - å››ç§æ¶ˆæ¯ä¼ é€’æ¨¡å¼
  - ä¸å¯å˜çŠ¶æ€ç®¡ç†
  - é«˜çº§è®¾è®¡æ¨¡å¼ï¼ˆFSMã€Stashã€Routerç­‰ï¼‰
  - æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

#### 3. é›†ç¾¤ç¯‡ï¼šCluster Shardingå®æˆ˜
- **æ–‡æ¡£**: [03_cluster_sharding_practice.md](./03_cluster_sharding_practice.md)
- **ä¸»é¢˜**:
  - Pekko ClusteråŸºç¡€ä¸æ‹“æ‰‘
  - Cluster ShardingåŸç†ä¸æ¶æ„
  - èŠ‚ç‚¹è§’è‰²è®¾è®¡ï¼ˆCOORDINATOR/WORKER/STORAGE/API_GATEWAYï¼‰
  - åˆ†ç‰‡ç­–ç•¥å®ç°ä¸å†å¹³è¡¡
  - èŠ‚ç‚¹æ•…éšœæ£€æµ‹ä¸æ¢å¤
  - Split Brain Resolveré…ç½®
  - åŠ¨æ€æ‰©ç¼©å®¹ä¸Kubernetes HPA
  - ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

#### 4. æµå¤„ç†ç¯‡ï¼šPekko Streamsç»Ÿä¸€æµæ‰¹å¤„ç†
- **æ–‡æ¡£**: [04_streams_unified_processing.md](./04_streams_unified_processing.md)
- **ä¸»é¢˜**:
  - Reactive Streamsè§„èŒƒä¸åŸç†
  - Source/Flow/Sinkä¸‰å¤§ç»„ä»¶è¯¦è§£
  - èƒŒå‹æœºåˆ¶æ·±åº¦è§£æ
  - æµæ‰¹ç»Ÿä¸€å¤„ç†æ¨¡å¼
  - çª—å£èšåˆï¼ˆæ—¶é—´çª—å£ã€æ»‘åŠ¨çª—å£ã€ä¼šè¯çª—å£ï¼‰
  - ä¸Actoræ¨¡å‹é›†æˆ
  - MySQL/Kafka/æ–‡ä»¶å¤„ç†å®æˆ˜
  - æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼ˆ50-100xæå‡ï¼‰
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

#### 5. æŒä¹…åŒ–ç¯‡ï¼šEvent Sourcingå®è·µ
- **æ–‡æ¡£**: [05_event_sourcing_persistence.md](./05_event_sourcing_persistence.md)
- **ä¸»é¢˜**:
  - Event Sourcingæ ¸å¿ƒåŸç†ï¼ˆå®Œæ•´å†å²ã€å®¡è®¡ã€æ—¶é—´æ—…è¡Œï¼‰
  - Pekko Persistence EventSourcedBehavior
  - WorkflowActoræŒä¹…åŒ–æ”¹é€ ï¼ˆCommand/Event/Stateï¼‰
  - å¿«ç…§æœºåˆ¶ä¸æ¢å¤ç­–ç•¥
  - CQRSæ¨¡å¼ï¼ˆè¯»å†™åˆ†ç¦»ã€Projectionã€Read Modelï¼‰
  - Cassandra/PostgreSQLé…ç½®
  - åºåˆ—åŒ–ä¸å…¼å®¹æ€§
  - ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

#### 6. æ€§èƒ½ç¯‡ï¼šè®©ç³»ç»Ÿé£èµ·æ¥
- **æ–‡æ¡£**: [06_performance_tuning.md](./06_performance_tuning.md)
- **ä¸»é¢˜**:
  - æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼ˆåŸºå‡†ã€è´Ÿè½½ã€å‹åŠ›ã€æµ¸æ³¡æµ‹è¯•ï¼‰
  - Actorç³»ç»Ÿè°ƒä¼˜ï¼ˆDispatcherã€Mailboxã€æ‰¹é‡å¤„ç†ï¼‰
  - Streamsæ€§èƒ½ä¼˜åŒ–ï¼ˆgroupedã€mapAsyncã€asyncè¾¹ç•Œï¼‰
  - é›†ç¾¤æ€§èƒ½è°ƒä¼˜ï¼ˆåºåˆ—åŒ–ã€Shardingã€ç½‘ç»œï¼‰
  - JVMè°ƒä¼˜ï¼ˆG1GC/ZGCã€å †å†…å­˜ã€GCå‚æ•°ï¼‰
  - Gatling/JMeterå‹æµ‹å®æˆ˜
  - Prometheus+Grafanaç›‘æ§
  - ç”Ÿäº§ç¯å¢ƒæ€§èƒ½é—®é¢˜æ¡ˆä¾‹
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

#### 7. ç”Ÿäº§ç¯‡ï¼šç›‘æ§è¿ç»´æœ€ä½³å®è·µï¼ˆå®Œç»“ç¯‡ï¼‰
- **æ–‡æ¡£**: [07_production_operations.md](./07_production_operations.md)
- **ä¸»é¢˜**:
  - å¯è§‚æµ‹æ€§ä¸‰æ”¯æŸ±ï¼ˆMetrics/Logging/Tracingï¼‰
  - Prometheus+Grafanaç›‘æ§ä½“ç³»
  - ç»“æ„åŒ–æ—¥å¿—ä¸ELK Stack
  - OpenTelemetryåˆ†å¸ƒå¼è¿½è¸ª
  - å‘Šè­¦åˆ†çº§ä¸AlertManageré…ç½®
  - å®Œæ•´ä¸Šçº¿æ£€æŸ¥æ¸…å•
  - å¸¸è§æ•…éšœåº”æ€¥å¤„ç†ï¼ˆèŠ‚ç‚¹å®•æœºã€å†…å­˜æ³„æ¼ç­‰ï¼‰
  - ç°åº¦å‘å¸ƒç­–ç•¥
  - ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ
- **å‘å¸ƒæ—¥æœŸ**: 2024å¹´11æœˆ

---

## ğŸ‰ ç³»åˆ—å®Œç»“

**7ç¯‡ç³»åˆ—æ–‡ç« å…¨éƒ¨å®Œæˆï¼**ä»æˆ˜ç•¥æ„¿æ™¯åˆ°ç”Ÿäº§å®è·µï¼Œæ„å»ºäº†å®Œæ•´çš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿã€‚

### ç³»åˆ—æˆæœ

**æŠ€æœ¯æ ˆè¦†ç›–**ï¼š
- âœ… Pekko Typed Actorsï¼ˆæ— é”å¹¶å‘ï¼‰
- âœ… Cluster Shardingï¼ˆçœŸæ­£åˆ†å¸ƒå¼ï¼‰
- âœ… Pekko Streamsï¼ˆæµæ‰¹ç»Ÿä¸€ï¼‰
- âœ… Event Sourcingï¼ˆå®Œæ•´å†å²ï¼‰
- âœ… ç›‘æ§è¿ç»´ï¼ˆç”Ÿäº§å°±ç»ªï¼‰

**æ€§èƒ½æå‡**ï¼š
- âœ… è§¦å‘å»¶è¿Ÿï¼š5ç§’ â†’ <10msï¼ˆ**500x**ï¼‰
- âœ… ååé‡ï¼š1000/s â†’ 10000/sï¼ˆ**10x**ï¼‰
- âœ… æ•…éšœæ¢å¤ï¼š30-60s â†’ <1sï¼ˆ**50x**ï¼‰
- âœ… æ‰¹é‡å¤„ç†ï¼šé€æ¡ â†’ æ‰¹é‡1000ï¼ˆ**50-100x**ï¼‰

**ä»£ç è´¨é‡**ï¼š
- âœ… å®Œæ•´å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
- âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®
- âœ… æ€§èƒ½æ•°æ®æ”¯æ’‘
- âœ… æœ€ä½³å®è·µæ€»ç»“

---

## ğŸ¯ ç³»åˆ—ç›®æ ‡

æœ¬ç³»åˆ—æ–‡ç« æ—¨åœ¨ï¼š

1. **ç†è®ºä¸å®è·µç»“åˆ**
   - æ·±å…¥å‰–ææŠ€æœ¯åŸç†
   - æä¾›å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
   - åˆ†äº«ç”Ÿäº§ç¯å¢ƒç»éªŒ

2. **å¾ªåºæ¸è¿›**
   - ä»æˆ˜ç•¥åˆ°æˆ˜æœ¯
   - ä»æ¦‚å¿µåˆ°å®ç°
   - ä»å•æœºåˆ°é›†ç¾¤

3. **å¼€æºè´¡çŒ®**
   - åˆ†äº«æŠ€æœ¯æ´å¯Ÿ
   - æ¨åŠ¨ç¤¾åŒºå‘å±•
   - ä¿ƒè¿›æŠ€æœ¯äº¤æµ

---

## ğŸ“– é˜…è¯»æŒ‡å—

### åˆå­¦è€…è·¯å¾„

å¦‚æœä½ æ˜¯Pekko/Akkaæ–°æ‰‹ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **æˆ˜ç•¥ç¯‡** - äº†è§£æ•´ä½“æ¶æ„å’Œè®¾è®¡ç†å¿µ
2. **æ¶æ„ç¯‡** - å­¦ä¹ Actoræ¨¡å‹åŸºç¡€
3. **æµå¤„ç†ç¯‡** - æŒæ¡Pekko Streams
4. **æŒä¹…åŒ–ç¯‡** - ç†è§£çŠ¶æ€ç®¡ç†
5. **é›†ç¾¤ç¯‡** - å­¦ä¹ åˆ†å¸ƒå¼ç‰¹æ€§
6. **æ€§èƒ½ç¯‡** - ä¼˜åŒ–å’Œè°ƒä¼˜
7. **ç”Ÿäº§ç¯‡** - ç”Ÿäº§çº§éƒ¨ç½²

### æ¶æ„å¸ˆè·¯å¾„

å¦‚æœä½ å…³æ³¨ç³»ç»Ÿè®¾è®¡å’Œæ¶æ„ï¼š

1. **æˆ˜ç•¥ç¯‡** - æ¶æ„æ„¿æ™¯å’Œåˆ›æ–°
2. **é›†ç¾¤ç¯‡** - åˆ†å¸ƒå¼æ¶æ„è®¾è®¡
3. **æŒä¹…åŒ–ç¯‡** - çŠ¶æ€ç®¡ç†ç­–ç•¥
4. **æ€§èƒ½ç¯‡** - æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
5. **ç”Ÿäº§ç¯‡** - ç”Ÿäº§çº§æ¶æ„

### å¼€å‘è€…è·¯å¾„

å¦‚æœä½ æƒ³å¿«é€Ÿä¸Šæ‰‹å¼€å‘ï¼š

1. **æˆ˜ç•¥ç¯‡** - å¿«é€Ÿäº†è§£ç³»ç»Ÿ
2. **æ¶æ„ç¯‡** - Actorç¼–ç¨‹æ¨¡å‹
3. **æµå¤„ç†ç¯‡** - æ•°æ®å¤„ç†å®ç°
4. **æ€§èƒ½ç¯‡** - ä»£ç ä¼˜åŒ–æŠ€å·§

---

## ğŸ”— ç›¸å…³èµ„æº

### é¡¹ç›®èµ„æº

- **GitHubä»“åº“**: https://github.com/Xuxiaotuan/pekko-reference
- **APIæ–‡æ¡£**: [å¾…å®Œå–„]
- **ç¤ºä¾‹ä»£ç **: `pekko-server/src/main/scala`

### å®˜æ–¹æ–‡æ¡£

- **Apache Pekko**: https://pekko.apache.org/
- **Akkaæ–‡æ¡£**: https://doc.akka.io/ (Pekkoçš„å‰èº«)
- **Lightbend Akka Platform**: https://www.lightbend.com/akka-platform

### ç›¸å…³æŠ€æœ¯

- **Apache DolphinScheduler**: https://dolphinscheduler.apache.org/
- **Apache Airflow**: https://airflow.apache.org/
- **Kubernetes**: https://kubernetes.io/
- **Reactive Streams**: https://www.reactive-streams.org/

---

## ğŸ’¬ åé¦ˆä¸äº¤æµ

æ¬¢è¿ï¼š

- ğŸŒŸ **Star** GitHubä»“åº“
- ğŸ’¡ **æIssue**è®¨è®ºæŠ€æœ¯é—®é¢˜
- ğŸ¤ **PRè´¡çŒ®**ä»£ç å’Œæ–‡æ¡£
- ğŸ“® **è”ç³»ä½œè€…**äº¤æµæƒ³æ³•

---

## ğŸ“ å†™ä½œè®¡åˆ’

| æ–‡ç«  | çŠ¶æ€ | é¢„è®¡å‘å¸ƒ | å®é™…å‘å¸ƒ |
|-----|------|---------|---------|
| æˆ˜ç•¥ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| æ¶æ„ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| é›†ç¾¤ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| æµå¤„ç†ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| æŒä¹…åŒ–ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| æ€§èƒ½ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |
| ç”Ÿäº§ç¯‡ | âœ… å®Œæˆ | 2024-11 | 2024-11-16 |

**ğŸ‰ ç³»åˆ—å®Œç»“ï¼š7/7ç¯‡å…¨éƒ¨å®Œæˆï¼**

---

## ğŸ¯ æ–‡ç« è´¨é‡æ ‡å‡†

æ¯ç¯‡æ–‡ç« éƒ½éµå¾ªä»¥ä¸‹æ ‡å‡†ï¼š

### å†…å®¹è¦æ±‚

- âœ… æ˜ç¡®çš„é—®é¢˜å®šä¹‰
- âœ… æ·±å…¥çš„åŸç†è§£æ
- âœ… å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹
- âœ… æ¸…æ™°çš„æ¶æ„å›¾
- âœ… å®æˆ˜ç»éªŒåˆ†äº«
- âœ… æœ€ä½³å®è·µæ€»ç»“

### æŠ€æœ¯æ·±åº¦

- ğŸ¯ **ç†è®ºåŸºç¡€** (30%): æ¦‚å¿µå’ŒåŸç†
- ğŸ¯ **ä»£ç å®ç°** (40%): å¯è¿è¡Œçš„ä¾‹å­
- ğŸ¯ **å®æˆ˜ç»éªŒ** (30%): è¸©å‘å’Œä¼˜åŒ–

### å¯è¯»æ€§

- ğŸ“– æ¸…æ™°çš„ç« èŠ‚ç»“æ„
- ğŸ“Š ä¸°å¯Œçš„å›¾è¡¨è¯´æ˜
- ğŸ’¡ ä»£ç æ³¨é‡Šå®Œæ•´
- ğŸ”— ç›¸å…³èµ„æºé“¾æ¥

---

## ğŸ† è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œç¤¾åŒºï¼š

- **Apache Pekkoå›¢é˜Ÿ** - ä¼˜ç§€çš„Actoræ¡†æ¶
- **Lightbend/Akkaç¤¾åŒº** - ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ
- **Apache DolphinScheduler** - æä¾›äº†å¯¹æ¯”å’Œçµæ„Ÿ
- **æ‰€æœ‰è´¡çŒ®è€…** - ä»£ç å’Œæ–‡æ¡£è´¡çŒ®

---

**ä½œè€…**: Xuxiaotuan  
**è®¸å¯**: Apache License 2.0  
**æ›´æ–°**: 2024å¹´11æœˆ16æ—¥

---

*è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºä¸‹ä¸€ä»£ä»»åŠ¡è°ƒåº¦å¹³å°ï¼* ğŸš€
