# 🎨 前端可视化编辑器使用指南

## 访问地址

启动前端后访问：`http://localhost:3000`

## 主要功能

### 1. 节点面板

左侧面板包含所有可用的节点类型：

#### Source节点（绿色）
- **随机数生成** - random.numbers
- **CSV文件** - file.csv
- **文本文件** - file.text
- **SQL查询** - sql.query
- **Kafka消费** - kafka.consumer

#### Transform节点（蓝色）
- **条件过滤** - filter.condition
- **映射转换** - map.transform
- **聚合求和** - aggregate.sum
- **数据清洗** - data.clean

#### Sink节点（橙色）
- **控制台输出** - console.log
- **文件输出** - file.text
- **Kafka生产** - kafka.producer

### 2. 画布操作

#### 添加节点
1. 从左侧面板拖拽节点到画布
2. 节点会自动定位

#### 连接节点
1. 点击源节点的输出端口（右侧圆点）
2. 拖动到目标节点的输入端口（左侧圆点）
3. 松开鼠标完成连接

#### 配置节点
1. 双击节点或点击节点后点击"配置"按钮
2. 在弹出的配置面板中设置参数
3. 点击"确定"保存配置

#### 删除操作
- 删除节点：选中节点后按`Delete`键
- 删除连线：选中连线后按`Delete`键

### 3. 工具栏

#### 保存工作流
1. 点击"保存"按钮
2. 输入工作流名称
3. 确认保存

#### 执行工作流
1. 点击"执行"按钮
2. 系统开始执行工作流
3. 在日志面板查看执行过程

#### 其他操作
- **撤销**: Ctrl+Z (Mac: Cmd+Z)
- **重做**: Ctrl+Y (Mac: Cmd+Shift+Z)
- **清空画布**: 点击"清空"按钮
- **适应屏幕**: 点击"适应"按钮

### 4. 日志面板

右侧面板显示执行日志：

```
✅ 开始执行工作流: 随机数测试
✅ 验证通过: 2个节点, 1条边
✅ Source节点: 1 个 (random.numbers)
✅ Sink节点: 1 个 (console.log)
✅ 开始构建Pekko Stream执行图
✅ 节点执行顺序: source_1 -> sink_1
[100行数据输出...]
✅ 工作流执行成功完成 (耗时: 23ms)
```

### 5. 状态指示

节点状态通过颜色和图标显示：

- 🟢 **就绪** - 节点已配置，等待执行
- 🟡 **执行中** - 节点正在执行
- ✅ **完成** - 节点执行成功
- ❌ **失败** - 节点执行失败

## 使用示例

### 示例1：简单数据流

1. 拖拽"随机数生成"节点到画布
2. 拖拽"控制台输出"节点到画布
3. 连接两个节点
4. 双击"随机数生成"配置：
   ```json
   {
     "count": 100,
     "min": 1,
     "max": 100
   }
   ```
5. 点击"执行"

### 示例2：数据处理管道

1. 添加"CSV文件"节点
2. 添加"条件过滤"节点
3. 添加"映射转换"节点
4. 添加"文件输出"节点
5. 按顺序连接所有节点
6. 配置每个节点的参数
7. 保存并执行

### 示例3：多路输出

1. 添加1个Source节点
2. 添加2个Transform节点
3. 添加2个Sink节点
4. 创建分支连接：
   ```
   Source
     ├→ Transform1 → Sink1
     └→ Transform2 → Sink2
   ```
5. 执行（注：目前仅支持简单DAG）

## 配置参数说明

### 随机数生成 (random.numbers)

```json
{
  "count": 100,      // 生成数量
  "min": 1,          // 最小值
  "max": 100         // 最大值
}
```

### CSV文件 (file.csv)

```json
{
  "path": "/data/input.csv",  // 文件路径
  "skipHeader": true,          // 跳过首行
  "delimiter": ","             // 分隔符
}
```

### 条件过滤 (filter.condition)

```json
{
  "condition": ">50"   // 过滤条件
}
```

### 控制台输出 (console.log)

```json
{
  "limit": 100   // 最大输出行数
}
```

### 文件输出 (file.text)

```json
{
  "path": "/data/output.txt",  // 输出路径
  "append": false               // 是否追加
}
```

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl+S` / `Cmd+S` | 保存工作流 |
| `Ctrl+Z` / `Cmd+Z` | 撤销 |
| `Ctrl+Y` / `Cmd+Shift+Z` | 重做 |
| `Delete` | 删除选中元素 |
| `Ctrl+A` / `Cmd+A` | 全选 |
| `Ctrl+C` / `Cmd+C` | 复制 |
| `Ctrl+V` / `Cmd+V` | 粘贴 |

## 常见问题

### 节点无法连接

**原因**: 
- Source节点只能作为起点
- Sink节点只能作为终点
- 不能创建环路

**解决**: 检查节点类型和连接方向

### 配置未生效

**原因**: 配置后未保存

**解决**: 配置完成后点击"确定"按钮

### 执行失败

**原因**: 
- 节点配置错误
- 后端服务未启动
- 网络连接问题

**解决**: 
1. 检查后端是否运行：`curl http://localhost:8080/health`
2. 查看日志面板的错误信息
3. 检查节点配置是否正确

### 画布卡顿

**原因**: 节点过多

**解决**: 
- 减少节点数量
- 刷新页面
- 使用"适应屏幕"功能

## 浏览器兼容性

| 浏览器 | 版本 | 支持情况 |
|--------|------|----------|
| Chrome | 90+ | ✅ 完全支持 |
| Firefox | 88+ | ✅ 完全支持 |
| Safari | 14+ | ✅ 完全支持 |
| Edge | 90+ | ✅ 完全支持 |
| IE | 任何版本 | ❌ 不支持 |

## 性能建议

- 单个工作流节点数建议不超过50个
- 复杂工作流建议拆分为多个子工作流
- 定期清理不用的工作流
- 使用快捷键提高效率

## 开发者选项

在浏览器控制台输入：

```javascript
// 启用调试模式
window.debugMode = true;

// 查看当前工作流JSON
console.log(window.currentWorkflow);

// 导出工作流
JSON.stringify(window.currentWorkflow);
```

## 反馈和建议

如有问题或建议，请：
1. 提交Issue到GitHub
2. 联系开发团队
3. 查看文档获取更多帮助
