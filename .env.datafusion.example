# DataFusion环境变量配置示例
# 复制此文件为 .env 并根据你的环境修改配置

# =============================================================================
# DataFusion基础配置
# =============================================================================

# 是否启用DataFusion集成 (true/false)
DATAFUSION_ENABLED=true

# DataFusion Service地址
DATAFUSION_HOST=localhost
# K8s环境使用: DATAFUSION_HOST=datafusion-service

# DataFusion Service端口
DATAFUSION_PORT=50051

# =============================================================================
# 连接池配置
# =============================================================================

# 最大连接数
DATAFUSION_POOL_MAX_TOTAL=10

# 最大空闲连接数
DATAFUSION_POOL_MAX_IDLE=5

# 最小空闲连接数
DATAFUSION_POOL_MIN_IDLE=2

# 连接超时（毫秒）
DATAFUSION_POOL_CONNECT_TIMEOUT=5000

# 请求超时（毫秒）
DATAFUSION_POOL_REQUEST_TIMEOUT=30000

# =============================================================================
# 查询配置
# =============================================================================

# 默认批处理大小
DATAFUSION_QUERY_DEFAULT_BATCH_SIZE=1000

# 默认查询超时（秒）
DATAFUSION_QUERY_DEFAULT_TIMEOUT=30

# 最大重试次数
DATAFUSION_QUERY_MAX_RETRIES=3

# 重试延迟（毫秒）
DATAFUSION_QUERY_RETRY_DELAY=1000

# =============================================================================
# 监控配置
# =============================================================================

# 是否启用Prometheus指标 (true/false)
DATAFUSION_METRICS_ENABLED=true

# 是否启用结构化日志 (true/false)
DATAFUSION_STRUCTURED_LOGGING=true

# 慢查询阈值（毫秒）
DATAFUSION_SLOW_QUERY_THRESHOLD=5000

# =============================================================================
# 健康检查配置
# =============================================================================

# 健康检查间隔（秒）
DATAFUSION_HEALTH_CHECK_INTERVAL=30

# 健康检查超时（毫秒）
DATAFUSION_HEALTH_CHECK_TIMEOUT=5000

# 失败阈值（连续失败多少次后标记为不健康）
DATAFUSION_HEALTH_CHECK_FAILURE_THRESHOLD=3

# =============================================================================
# 环境特定配置示例
# =============================================================================

# 开发环境
# DATAFUSION_POOL_MAX_TOTAL=5
# DATAFUSION_QUERY_DEFAULT_BATCH_SIZE=100
# DATAFUSION_SLOW_QUERY_THRESHOLD=2000

# 测试环境
# DATAFUSION_POOL_MAX_TOTAL=3
# DATAFUSION_QUERY_DEFAULT_BATCH_SIZE=10
# DATAFUSION_METRICS_ENABLED=false

# 生产环境
# DATAFUSION_POOL_MAX_TOTAL=20
# DATAFUSION_QUERY_DEFAULT_TIMEOUT=45
# DATAFUSION_SLOW_QUERY_THRESHOLD=10000

# K8s环境
# DATAFUSION_HOST=datafusion-service
# DATAFUSION_POOL_CONNECT_TIMEOUT=10000
# DATAFUSION_HEALTH_CHECK_TIMEOUT=8000